

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">

<!-- Style CSS -->
<link rel="stylesheet" href="./product-cart.component.css">

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<div class="wrapper">

    <main class="main-content">

        <section class="section-space">
            <div class="container">
                <h3>GIỎ HÀNG</h3>
                <div class="shopping-cart-form table-responsive">
                    <form action="#" method="post">
                        <table class="table text-center">
                            <thead>
                                <tr>
                                    <th class="product-remove">Xóa</th>
                                    <th class="product-thumbnail">Sản phẩm</th>
                                    <th class="product-name">&nbsp;</th>
                                    <th class="product-price">Giá</th>
                                    <th class="product-quantity">Số lượng</th>
                                    <th class="product-subtotal">Tổng</th>
                                </tr>
                            </thead>
                            <tbody>

                                <tr class="tbody-item" *ngFor="let cartItem of cartItemsDetailed">
                                    <td class="product-remove">
                                        <a class="remove" (click)="deleteCartItem(cartItem)">×</a>
                                    </td>
                                    <td class="product-thumbnail">
                                        <div class="thumb">
                                            <img src="{{cartItem.productt.img1}}" alt="" width="100" height="100"
                                                alt="Image-Loading">


                                        </div>
                                    </td>
                                    <td class="product-name">
                                        <a class="title" href="">{{cartItem.productt.name}}</a><br>
                                        <a class="type minitext">Phân loại: {{selectedOption}}</a>
                                    </td>
                                    <td class="product-price">
                                        <span class="price">{{cartItem.productt.price}}.000 đ</span>
                                    </td>
                                    <td class="product-quantity">
                                        <div class="pro-qty">

                                            <p-inputNumber mode="decimal" 
                                            [showButtons]="true"
                                                [inputId]="cartItem.productt.id" 
                                                [min]="1" [max]="1000" 
                                                [type]="'number'"
                                                [(ngModel)]="cartItem.quantity"
                                                (onInput)="updateCartItemQuantity($event, cartItem )">
                                            </p-inputNumber>
                                        </div>

                                    </td>

                                    <td class="product-subtotal">
                                        <span class="">{{ calculateSubtotal(cartItem) }}.000 đ</span>
                                    </td>
                           
                                </tr>

                            </tbody>
                        </table>
                    </form>
                </div>
                <div class="row">
                    <div class="col-12 col-lg-6">
                        <div class="coupon-wrap">
                            <h4 class="title">Mã giảm giá</h4>
                            <p class="desc">Nhập mã giảm giá (nếu có)</p>
                            <input type="text" class="form-control" placeholder="Nhập mã giảm giá">
                            <button type="button" class="btn-coupon">Áp dụng</button>
                        </div>
                    </div>
                    <div class="col-12 col-lg-6">
                        <div class="cart-totals-wrap">
                            <h2 class="title">Tổng giỏ hàng</h2>
                            <table>
                                <tbody>
                                    <tr class="cart-subtotal">
                                        <th>Tổng sản phẩm</th>
                                        <td>
                                            <span class="amount">$499.00</span>
                                        </td>
                                    </tr>
                                    <tr class="coupon-totals">
                                        <th>Giảm giá</th>
                                        <td>
                                            <span class="amount">$499.00</span>
                                        </td>
                                    </tr>
                                    <tr class="shipping-totals">
                                        <th>Phí vận chuyển</th>
                                        <td>
                                            <span class="shipping-fee">25.000 đ</span>

                                            <p class="address">Gửi đến <strong>Địa chỉ lưu sẵn: VD TP. Thủ
                                                    Đức</strong>.</p>
                                            <!-- Cần thêm địa chỉ của client: quốc gia, thành phố, quận huyện... vì nó sẽ lấy địa chỉ có sẵn áp vào form địa chỉ,  -->
                                            <a href="" routerLink="/trangtaikhoan" routerLinkActive="active"
                                                class="btn-shipping-address">Thay đổi địa
                                                chỉ</a>
                                        </td>
                                    </tr>
                                    <tr class="order-total">
                                        <th>Tổng cộng</th>
                                        <td>
                                            <span class="amount">{{totalPrice }}.000 đ</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <div class="text-end">
                                <a routerLink="/checkout" routerLinkActive="active" class="checkout-button">Tiếp tục thanh toán</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>
</div>
